<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>黄昏賛歌 — Responsive</title>

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Lectarica">
  <meta name="twitter:title" content="黄昏賛歌">
  <meta name="twitter:description" content="味のない涙、一粒あげます">
  <meta name="twitter:image" content="https://lectarica.github.io/sunset.png">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    /* -----------------------------
       Base & Design Tokens
    ------------------------------*/
    :root {
      --bg-1: #1c0d30;
      --bg-2: #4a257a;
      --text: #FFFFFF;
      --text-dim: #EDEAF6;
      --link: #FFFFFF;
      --link-hover: #FFFFFA;
      --card-bg: rgba(255,255,255,0.05);
      --radius: 14px;
      --shadow: 0 10px 30px rgba(0,0,0,.25);
      --maxw: 960px;
      --gap: 16px;
    }

    /* A light reset */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      color: var(--text);
      font-family: 'Sawarabi Mincho', serif;
      line-height: 1.6;
      background: var(--bg-1);
      opacity: 0;              /* fade-in */
      transition: opacity 0.8s ease-in;
      animation: breathe 5s infinite alternate;
      padding-bottom: env(safe-area-inset-bottom); /* for iOS */
    }

    @keyframes breathe {
      0%   { background-color: var(--bg-1); }
      100% { background-color: var(--bg-2); }
    }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce) {
      body { animation: none; transition: none; }
      .fas.fa-fish { animation: none; }
      img { transition: none; }
    }

    .wrap {
      max-width: var(--maxw);
      margin: 0 auto;
      padding: clamp(16px, 3vw, 40px);
    }

    header { text-align: center; margin-top: clamp(16px, 3vw, 24px); }
    h1 { font-size: clamp(28px, 4vw, 48px); margin: 0 0 4px; letter-spacing: 0.08em; }
    .lead { margin: 0; color: var(--text-dim); font-size: clamp(14px, 2.2vw, 18px); }

    /* Hero image */
    .hero {
      display: grid;
      place-items: center;
      margin: clamp(16px, 5vw, 40px) 0;
    }
    .hero a { display: inline-block; }
    .hero img {
      display: block;
      width: min(100%, 520px);
      height: auto;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: transform 0.15s ease-in-out;
    }
    .hero img:hover { transform: scale(1.03); }

    /* Nav cards */
    nav {
      margin: clamp(8px, 3vw, 24px) 0;
    }
    .nav-list {
      list-style: none; padding: 0; margin: 0;
      display: grid;
      grid-template-columns: repeat( auto-fit, minmax(140px, 1fr) );
      gap: var(--gap);
    }
    .nav-list li { display: contents; }
    .nav-card {
      display: block;
      text-decoration: none; color: var(--link);
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 14px 16px;
      text-align: center;
      font-weight: 600;
      letter-spacing: .04em;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      transition: transform .2s ease, color .2s ease, background .2s ease;
    }
    .nav-card:hover, .nav-card:focus-visible {
      color: var(--link-hover);
      transform: translateY(-2px) scale(1.02);
      outline: none;
    }

    /* Tooltip */
    #tooltip {
      position: fixed;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 14px;
      z-index: 1000;
      max-width: min(70vw, 240px);
      text-align: center;
      box-sizing: border-box;
      box-shadow: var(--shadow);
      pointer-events: none;
    }

    /* Fish icon (draggable) */
    .fas.fa-fish {
      position: fixed;
      bottom: 20px; right: 20px;
      font-size: clamp(28px, 6vw, 36px);
      animation: sway 3s ease-in-out infinite;
      transform-origin: center;
      cursor: grab; user-select: none;
      touch-action: none; /* improves touch-drag */
      z-index: 1100;
    }
    .fas.fa-fish:active { cursor: grabbing; }
    @keyframes sway { 0%{ transform: rotate(5deg); } 50%{ transform: rotate(-5deg);} 100%{ transform: rotate(5deg);} }

    footer {
      text-align: center;
      padding: 24px 12px calc(24px + env(safe-area-inset-bottom));
      color: var(--text-dim);
      font-size: 14px;
    }

    /* Small helpers */
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
  </style>
</head>
<body>
  <i class="fas fa-fish" id="draggable-fish" aria-hidden="true"></i>
  <div id="tooltip" style="display:none;">Tooltip Content</div>

  <div class="wrap">
    <header class="top" role="banner">
      <h1>黄昏賛歌</h1>
      <p class="lead">ここにはヤマゴボウが生い茂るのみ</p>
    </header>

    <section class="hero" aria-label="">
      <a href="https://maps.app.goo.gl/emQMYKuxmBaHBWgq9" target="_blank" rel="noopener noreferrer">
        <img src="twilight.jpg" alt="さよならのまち" loading="lazy">
      </a>
    </section>

    <nav aria-label="主要リンク">
      <ul class="nav-list topcontents">
        <li><a class="nav-card" href="profile.html" data-tooltip="略歴です">墓碑<span class="sr-only"></span></a></li>
        <li><a class="nav-card" href="physics.html" data-tooltip="業績の羅列です">足跡<span class="sr-only"></span></a></li>
        <li><a class="nav-card" href="hanazakari_new.html" data-tooltip="昔の思い出です">彼方</a></li>
        <li><a class="nav-card" href="link.html" data-tooltip="各種リンク">呼吸口</a></li>
        <li><a class="nav-card" href="note.html" data-tooltip="計算ノート">ノート置き場</a></li>
      </ul>
    </nav>
  </div>

  <footer>
    &copy; 2020-<span id="year"></span> Lectarica
  </footer>

  <script>
    // Fade-in on load
    window.addEventListener('load', () => { document.body.style.opacity = 1; });

    const tooltip = document.getElementById('tooltip');
    const fish = document.getElementById('draggable-fish');

    function updateTooltipPosition() {
      const fishRect = fish.getBoundingClientRect();
      const tooltipRect = tooltip.getBoundingClientRect();
      let left = fishRect.right + 8;
      let top = fishRect.top + (fishRect.height / 2) - (tooltipRect.height / 2);
      if (left + tooltipRect.width > window.innerWidth - 10) left = fishRect.left - tooltipRect.width - 8;
      top = Math.max(10, Math.min(top, window.innerHeight - tooltipRect.height - 10));
      tooltip.style.left = left + 'px';
      tooltip.style.top = top + 'px';
    }

    // Reposition tooltip on resize/scroll if visible
    ['resize', 'scroll'].forEach(evt => window.addEventListener(evt, () => {
      if (tooltip.style.display === 'block') updateTooltipPosition();
    }, { passive: true }));

    // Tooltip behaviors for nav links
    document.querySelectorAll('.topcontents a').forEach(item => {
      item.addEventListener('mouseenter', function() {
        tooltip.textContent = item.getAttribute('data-tooltip');
        tooltip.style.display = 'block';
        requestAnimationFrame(updateTooltipPosition);
      });
      item.addEventListener('mouseleave', function() { tooltip.style.display = 'none'; });
      item.addEventListener('focus', function() { // keyboard focus
        tooltip.textContent = item.getAttribute('data-tooltip');
        tooltip.style.display = 'block';
        requestAnimationFrame(updateTooltipPosition);
      });
      item.addEventListener('blur', function() { tooltip.style.display = 'none'; });
    });

    // Draggable fish (mouse + touch)
    let isDragging = false;
    let offset = { x: 0, y: 0 };

    function startDrag(e) {
      isDragging = true;
      const rect = fish.getBoundingClientRect();
      const point = (e.touches && e.touches[0]) || e;
      offset.x = point.clientX - rect.left;
      offset.y = point.clientY - rect.top;
      fish.style.bottom = 'auto';
      fish.style.right  = 'auto';
      e.preventDefault();
    }

    function drag(e) {
      if (!isDragging) return;
      const point = (e.touches && e.touches[0]) || e;
      fish.style.left = (point.clientX - offset.x) + 'px';
      fish.style.top  = (point.clientY - offset.y) + 'px';
      if (tooltip.style.display === 'block') updateTooltipPosition();
    }

    function endDrag(){ isDragging = false; }

    fish.addEventListener('mousedown', startDrag);
    window.addEventListener('mousemove', drag);
    window.addEventListener('mouseup', endDrag);

    fish.addEventListener('touchstart', startDrag, { passive: false });
    window.addEventListener('touchmove', drag, { passive: false });
    window.addEventListener('touchend', endDrag);

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
